<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Clientes | Glitch Tech Services</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%230a0e27'/%3E%3Cpath d='M30 20 L50 50 L30 80 L40 80 L60 50 L40 20 Z' fill='%2300ff41' opacity='0.8'/%3E%3Cpath d='M45 20 L65 50 L45 80 L55 80 L75 50 L55 20 Z' fill='%2300ff41'/%3E%3Ccircle cx='25' cy='25' r='3' fill='%2300ff41'/%3E%3Ccircle cx='75' cy='25' r='3' fill='%2300ff41'/%3E%3Ccircle cx='25' cy='75' r='3' fill='%2300ff41'/%3E%3Ccircle cx='75' cy='75' r='3' fill='%2300ff41'/%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=IBM+Plex+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --neon-green: #00ff41;
            --dark-bg: #0a0e27;
            --darker-bg: #050810;
            --card-bg: rgba(15, 20, 40, 0.9);
            --border-glow: rgba(0, 255, 65, 0.3);
        }

        body {
            font-family: 'IBM Plex Sans', sans-serif;
            background: var(--dark-bg);
            color: #e0e0e0;
            min-height: 100vh;
            position: relative;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.15;
            background: 
                linear-gradient(90deg, transparent 49%, var(--neon-green) 49%, var(--neon-green) 51%, transparent 51%),
                linear-gradient(0deg, transparent 49%, var(--neon-green) 49%, var(--neon-green) 51%, transparent 51%);
            background-size: 50px 50px;
            animation: gridPulse 4s ease-in-out infinite;
        }

        @keyframes gridPulse {
            0%, 100% { opacity: 0.1; }
            50% { opacity: 0.2; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        header {
            padding: 20px 0;
            border-bottom: 2px solid var(--border-glow);
            background: rgba(10, 14, 39, 0.9);
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            color: var(--neon-green);
            text-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }

        .back-link {
            color: var(--neon-green);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .back-link:hover {
            text-shadow: 0 0 10px var(--neon-green);
        }

        /* Login/Signup Form */
        .auth-container {
            max-width: 450px;
            margin: 80px auto;
            background: var(--card-bg);
            border: 2px solid var(--border-glow);
            border-radius: 10px;
            padding: 40px;
        }

        .auth-container h2 {
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-green);
            margin-bottom: 30px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #b0b0b0;
            font-size: 0.9rem;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-glow);
            border-radius: 5px;
            color: #e0e0e0;
            font-size: 1rem;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--neon-green);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }

        .btn {
            width: 100%;
            padding: 14px;
            background: var(--neon-green);
            color: var(--dark-bg);
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Orbitron', sans-serif;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 65, 0.4);
        }

        .toggle-auth {
            text-align: center;
            margin-top: 20px;
            color: #888;
        }

        .toggle-auth a {
            color: var(--neon-green);
            cursor: pointer;
            text-decoration: none;
        }

        .toggle-auth a:hover {
            text-decoration: underline;
        }

        /* Dashboard */
        .dashboard {
            display: none;
            padding: 40px 0;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .dashboard-header h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-green);
        }

        .logout-btn {
            padding: 10px 20px;
            background: transparent;
            border: 2px solid var(--neon-green);
            color: var(--neon-green);
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: var(--neon-green);
            color: var(--dark-bg);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--card-bg);
            border: 2px solid var(--border-glow);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
        }

        .stat-card h3 {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .stat-card .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: var(--neon-green);
            font-weight: 700;
        }

        /* Repair Status */
        .repair-section {
            background: var(--card-bg);
            border: 2px solid var(--border-glow);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .repair-section h2 {
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-green);
            margin-bottom: 20px;
        }

        .repair-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-glow);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .repair-item h3 {
            color: var(--neon-green);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .repair-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .repair-info-item {
            font-size: 0.9rem;
        }

        .repair-info-item strong {
            color: #888;
        }

        /* Status Timeline */
        .status-timeline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            position: relative;
        }

        .status-timeline::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #333;
            z-index: 0;
        }

        .status-step {
            text-align: center;
            position: relative;
            z-index: 1;
            flex: 1;
        }

        .status-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #333;
            border: 2px solid #555;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .status-step.active .status-dot {
            background: var(--neon-green);
            border-color: var(--neon-green);
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.6);
            color: var(--dark-bg);
        }

        .status-step.completed .status-dot {
            background: var(--neon-green);
            border-color: var(--neon-green);
            color: var(--dark-bg);
        }

        .status-label {
            font-size: 0.8rem;
            color: #888;
        }

        .status-step.active .status-label,
        .status-step.completed .status-label {
            color: var(--neon-green);
        }

        /* Messages */
        .messages-container {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-glow);
            border-radius: 8px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
        }

        .message.from-tech {
            background: rgba(0, 255, 65, 0.1);
            border-left: 3px solid var(--neon-green);
        }

        .message.from-customer {
            background: rgba(100, 100, 100, 0.1);
            border-left: 3px solid #666;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.85rem;
            color: #888;
        }

        .message-sender {
            color: var(--neon-green);
            font-weight: 600;
        }

        .message-content {
            color: #e0e0e0;
        }

        .message-form {
            display: flex;
            gap: 10px;
        }

        .message-input {
            flex: 1;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-glow);
            border-radius: 5px;
            color: #e0e0e0;
        }

        .message-input:focus {
            outline: none;
            border-color: var(--neon-green);
        }

        .send-btn {
            padding: 12px 24px;
            background: var(--neon-green);
            color: var(--dark-bg);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .send-btn:hover {
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.5);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #888;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        /* Alert */
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .alert.error {
            background: rgba(255, 0, 0, 0.1);
            border-color: #ff0000;
            color: #ff6b6b;
        }

        .alert.success {
            background: rgba(0, 255, 65, 0.1);
            border-color: var(--neon-green);
            color: var(--neon-green);
        }

        .hidden {
            display: none !important;
        }

        /* Demo Notice */
        .demo-notice {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid rgba(255, 193, 7, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .demo-notice h3 {
            color: #ffc107;
            margin-bottom: 10px;
        }

        .demo-notice p {
            color: #b0b0b0;
            margin-bottom: 15px;
        }

        .demo-credentials {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            display: inline-block;
        }

        .demo-credentials strong {
            color: var(--neon-green);
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">PORTAL GLITCH TECH</div>
                <a href="index-es.html" class="back-link">‚Üê Volver al Sitio Principal</a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Demo Notice -->
        <div class="demo-notice" id="demoNotice">
            <h3>üöÄ Modo de Demostraci√≥n</h3>
            <p>Esta es una demostraci√≥n del portal de clientes. En producci√≥n, los clientes crear√≠an cuentas despu√©s de reservar una reparaci√≥n.</p>
            <div class="demo-credentials">
                <strong>Inicio de Sesi√≥n Demo:</strong> demo@customer.com / password123
            </div>
        </div>

        <!-- Login/Signup Form -->
        <div class="auth-container" id="authContainer">
            <h2 id="authTitle">Inicio de Sesi√≥n de Cliente</h2>
            
            <div id="alertContainer"></div>

            <form id="authForm">
                <div class="form-group">
                    <label for="email">Correo Electr√≥nico</label>
                    <input type="email" id="email" required placeholder="tu@correo.com">
                </div>

                <div class="form-group">
                    <label for="password">Contrase√±a</label>
                    <input type="password" id="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>

                <div class="form-group" id="nameGroup" style="display:none;">
                    <label for="name">Nombre Completo</label>
                    <input type="text" id="name" placeholder="Juan P√©rez">
                </div>

                <div class="form-group" id="phoneGroup" style="display:none;">
                    <label for="phone">N√∫mero de Tel√©fono</label>
                    <input type="tel" id="phone" placeholder="(305) 555-1234">
                </div>

                <button type="submit" class="btn" id="authButton">Iniciar Sesi√≥n</button>
            </form>

            <div class="toggle-auth">
                <span id="toggleText">¬øNo tienes una cuenta?</span>
                <a id="toggleLink">Registrarse</a>
            </div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard" id="dashboard">
            <div class="dashboard-header">
                <h1>Bienvenido, <span id="customerName">Cliente</span>!</h1>
                <button class="logout-btn" id="logoutBtn">Cerrar Sesi√≥n</button>
            </div>

            <!-- Stats -->
            <div class="dashboard-grid">
                <div class="stat-card">
                    <h3>Reparaciones Activas</h3>
                    <div class="stat-value" id="activeRepairs">0</div>
                </div>
                <div class="stat-card">
                    <h3>Completadas</h3>
                    <div class="stat-value" id="completedRepairs">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Gastado</h3>
                    <div class="stat-value" id="totalSpent">$0</div>
                </div>
            </div>

            <!-- Current Repairs -->
            <div class="repair-section">
                <h2>Reparaciones Actuales</h2>
                <div id="currentRepairs">
                    <div class="empty-state">
                        <div class="empty-state-icon">üì≠</div>
                        <p>No hay reparaciones activas. ¬°Cont√°ctenos cuando necesite ayuda!</p>
                    </div>
                </div>
            </div>

            <!-- Messages -->
            <div class="repair-section">
                <h2>Mensajes</h2>
                <div class="messages-container" id="messagesContainer">
                    <div class="empty-state">
                        <div class="empty-state-icon">üí¨</div>
                        <p>No hay mensajes a√∫n.</p>
                    </div>
                </div>
                <div class="message-form">
                    <input type="text" class="message-input" id="messageInput" placeholder="Escribe tu mensaje...">
                    <button class="send-btn" id="sendMessage">Enviar</button>
                </div>
            </div>

            <!-- Repair History -->
            <div class="repair-section">
                <h2>Historial de Reparaciones</h2>
                <div id="repairHistory">
                    <div class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <p>No hay historial de reparaciones a√∫n.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple demo data - in production this would use persistent storage
        let isLogin = true;
        let currentUser = null;

        // Demo data in Spanish
        const demoUser = {
            email: 'demo@customer.com',
            password: 'password123',
            name: 'Cliente Demo',
            phone: '(305) 555-1234',
            repairs: [
                {
                    id: 'R001',
                    device: 'Laptop Dell Latitude',
                    issue: 'Funcionando lento, posible virus',
                    status: 'repairing', // received, diagnosing, repairing, ready, completed
                    dateReceived: '28/01/2025',
                    estimatedCost: '$75',
                    actualCost: '$75',
                    notes: 'Se encontr√≥ malware y bloatware. Limpiando el sistema ahora.'
                }
            ],
            messages: [
                {
                    from: 'tech',
                    content: '¬°Hola! Recib√≠ tu laptop. Comenzando diagn√≥stico ahora.',
                    time: '28/01/2025 10:30 AM'
                },
                {
                    from: 'tech',
                    content: 'Encontr√© el problema - malware y demasiados programas de inicio. Limpi√°ndolo ahora. ¬°Deber√≠a estar listo para ma√±ana!',
                    time: '28/01/2025 2:15 PM'
                }
            ],
            history: []
        };

        // DOM Elements
        const authContainer = document.getElementById('authContainer');
        const dashboard = document.getElementById('dashboard');
        const authForm = document.getElementById('authForm');
        const authTitle = document.getElementById('authTitle');
        const authButton = document.getElementById('authButton');
        const toggleText = document.getElementById('toggleText');
        const toggleLink = document.getElementById('toggleLink');
        const nameGroup = document.getElementById('nameGroup');
        const phoneGroup = document.getElementById('phoneGroup');
        const alertContainer = document.getElementById('alertContainer');
        const customerName = document.getElementById('customerName');
        const logoutBtn = document.getElementById('logoutBtn');
        const demoNotice = document.getElementById('demoNotice');

        // Toggle between login and signup
        toggleLink.addEventListener('click', () => {
            isLogin = !isLogin;
            if (isLogin) {
                authTitle.textContent = 'Inicio de Sesi√≥n de Cliente';
                authButton.textContent = 'Iniciar Sesi√≥n';
                toggleText.textContent = "¬øNo tienes una cuenta?";
                toggleLink.textContent = 'Registrarse';
                nameGroup.style.display = 'none';
                phoneGroup.style.display = 'none';
            } else {
                authTitle.textContent = 'Crear Cuenta';
                authButton.textContent = 'Registrarse';
                toggleText.textContent = '¬øYa tienes una cuenta?';
                toggleLink.textContent = 'Iniciar Sesi√≥n';
                nameGroup.style.display = 'block';
                phoneGroup.style.display = 'block';
            }
        });

        // Handle auth form
        authForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (isLogin) {
                // Login
                if (email === demoUser.email && password === demoUser.password) {
                    currentUser = demoUser;
                    showDashboard();
                } else {
                    showAlert('Credenciales inv√°lidas. Intenta: demo@customer.com / password123', 'error');
                }
            } else {
                // Signup
                const name = document.getElementById('name').value;
                const phone = document.getElementById('phone').value;
                showAlert('¬°Cuenta creada! En producci√≥n, recibir√≠as un correo de confirmaci√≥n.', 'success');
                setTimeout(() => {
                    isLogin = true;
                    toggleLink.click();
                }, 2000);
            }
        });

        // Logout
        logoutBtn.addEventListener('click', () => {
            currentUser = null;
            dashboard.style.display = 'none';
            authContainer.style.display = 'block';
            demoNotice.style.display = 'block';
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
        });

        // Show alert
        function showAlert(message, type) {
            alertContainer.innerHTML = `<div class="alert ${type}">${message}</div>`;
            setTimeout(() => {
                alertContainer.innerHTML = '';
            }, 5000);
        }

        // Show dashboard
        function showDashboard() {
            authContainer.style.display = 'none';
            demoNotice.style.display = 'none';
            dashboard.style.display = 'block';
            customerName.textContent = currentUser.name;

            // Load stats
            const activeCount = currentUser.repairs.filter(r => r.status !== 'completed').length;
            const completedCount = currentUser.repairs.filter(r => r.status === 'completed').length;
            const totalSpent = currentUser.repairs.reduce((sum, r) => {
                const cost = parseInt(r.actualCost.replace(/\D/g, ''));
                return sum + (r.status === 'completed' ? cost : 0);
            }, 0);

            document.getElementById('activeRepairs').textContent = activeCount;
            document.getElementById('completedRepairs').textContent = completedCount;
            document.getElementById('totalSpent').textContent = `$${totalSpent}`;

            // Load current repairs
            loadCurrentRepairs();
            
            // Load messages
            loadMessages();

            // Load history
            loadHistory();
        }

        // Load current repairs
        function loadCurrentRepairs() {
            const container = document.getElementById('currentRepairs');
            const active = currentUser.repairs.filter(r => r.status !== 'completed');

            if (active.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üì≠</div>
                        <p>No hay reparaciones activas. ¬°Cont√°ctenos cuando necesite ayuda!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = active.map(repair => `
                <div class="repair-item">
                    <h3>${repair.device}</h3>
                    <div class="repair-info">
                        <div class="repair-info-item">
                            <strong>Problema:</strong> ${repair.issue}
                        </div>
                        <div class="repair-info-item">
                            <strong>ID de Reparaci√≥n:</strong> ${repair.id}
                        </div>
                        <div class="repair-info-item">
                            <strong>Recibido:</strong> ${repair.dateReceived}
                        </div>
                        <div class="repair-info-item">
                            <strong>Costo:</strong> ${repair.estimatedCost}
                        </div>
                    </div>
                    ${repair.notes ? `<p style="color: #b0b0b0; margin-top: 10px;"><strong>Notas:</strong> ${repair.notes}</p>` : ''}
                    
                    <div class="status-timeline">
                        <div class="status-step ${repair.status === 'received' || repair.status === 'diagnosing' || repair.status === 'repairing' || repair.status === 'ready' ? 'completed' : ''}">
                            <div class="status-dot">‚úì</div>
                            <div class="status-label">Recibido</div>
                        </div>
                        <div class="status-step ${repair.status === 'diagnosing' || repair.status === 'repairing' || repair.status === 'ready' ? 'completed' : repair.status === 'received' ? 'active' : ''}">
                            <div class="status-dot">${repair.status === 'diagnosing' || repair.status === 'repairing' || repair.status === 'ready' ? '‚úì' : ''}</div>
                            <div class="status-label">Diagnosticando</div>
                        </div>
                        <div class="status-step ${repair.status === 'repairing' || repair.status === 'ready' ? 'completed' : repair.status === 'diagnosing' ? 'active' : ''}">
                            <div class="status-dot">${repair.status === 'repairing' || repair.status === 'ready' ? '‚úì' : ''}</div>
                            <div class="status-label">Reparando</div>
                        </div>
                        <div class="status-step ${repair.status === 'ready' ? 'active' : ''}">
                            <div class="status-dot"></div>
                            <div class="status-label">Listo para Recoger</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Load messages
        function loadMessages() {
            const container = document.getElementById('messagesContainer');
            
            if (currentUser.messages.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üí¨</div>
                        <p>No hay mensajes a√∫n.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = currentUser.messages.map(msg => `
                <div class="message ${msg.from === 'tech' ? 'from-tech' : 'from-customer'}">
                    <div class="message-header">
                        <span class="message-sender">${msg.from === 'tech' ? 'Glitch Tech' : 'T√∫'}</span>
                        <span class="message-time">${msg.time}</span>
                    </div>
                    <div class="message-content">${msg.content}</div>
                </div>
            `).join('');

            // Scroll to bottom
            container.scrollTop = container.scrollHeight;
        }

        // Send message
        document.getElementById('sendMessage').addEventListener('click', () => {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (message) {
                const now = new Date();
                const time = now.toLocaleString('en-US', { 
                    month: '2-digit', 
                    day: '2-digit', 
                    year: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true 
                }).replace(',', '');

                currentUser.messages.push({
                    from: 'customer',
                    content: message,
                    time: time
                });

                input.value = '';
                loadMessages();

                // Auto-reply from tech (demo)
                setTimeout(() => {
                    currentUser.messages.push({
                        from: 'tech',
                        content: '¬°Gracias por tu mensaje! Te responder√© pronto.',
                        time: time
                    });
                    loadMessages();
                }, 2000);
            }
        });

        // Load history
        function loadHistory() {
            const container = document.getElementById('repairHistory');
            const completed = currentUser.repairs.filter(r => r.status === 'completed');

            if (completed.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <p>No hay historial de reparaciones a√∫n.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = completed.map(repair => `
                <div class="repair-item">
                    <h3>${repair.device}</h3>
                    <div class="repair-info">
                        <div class="repair-info-item">
                            <strong>Problema:</strong> ${repair.issue}
                        </div>
                        <div class="repair-info-item">
                            <strong>ID de Reparaci√≥n:</strong> ${repair.id}
                        </div>
                        <div class="repair-info-item">
                            <strong>Fecha:</strong> ${repair.dateReceived}
                        </div>
                        <div class="repair-info-item">
                            <strong>Costo:</strong> ${repair.actualCost}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Allow Enter key to send message
        document.getElementById('messageInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('sendMessage').click();
            }
        });
    </script>
</body>
</html>
